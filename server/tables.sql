USE LIHI;
CREATE TABLE IF NOT EXISTS VILLAGES (VID INT PRIMARY KEY auto_increment, NAME VARCHAR(50) NOT NULL UNIQUE);
CREATE TABLE IF NOT EXISTS PERMISSIONS (ROLE_ID INT PRIMARY KEY auto_increment, DESCRIPTION VARCHAR(255) NOT NULL UNIQUE);
CREATE TABLE IF NOT EXISTS PEOPLE (PID INT PRIMARY KEY auto_increment, FIRST_NAME VARCHAR(50) NOT NULL, LAST_NAME VARCHAR(50) NOT NULL, BIRTHDAY DATE, ROLE_ID INT NOT NULL, VID INT NOT NULL, CONSTRAINT FK_Permission FOREIGN KEY (ROLE_ID) REFERENCES PERMISSIONS(ROLE_ID), CONSTRAINT FK_Village FOREIGN KEY (VID) REFERENCES VILLAGES(VID));
CREATE TABLE IF NOT EXISTS ROOMS (ROOM_ID INT PRIMARY KEY auto_increment, ROOM_NUM INT NOT NULL, BLDG_NAME VARCHAR(50) NOT NULL, VID INT NOT NULL, VACANT BOOLEAN, CONSTRAINT FK_VID FOREIGN KEY (VID) REFERENCES VILLAGES(VID));
CREATE TABLE IF NOT EXISTS RESIDENTS (RID INT PRIMARY KEY auto_increment, PID INT NOT NULL, ROOM_ID INT NOT NULL, START_DATE DATE NOT NULL, END_DATE DATE, IN_RESIDENCE BOOLEAN, CONSTRAINT FK_PeopleID FOREIGN KEY (PID) REFERENCES PEOPLE(PID), CONSTRAINT FK_ROOMID FOREIGN KEY(ROOM_ID) REFERENCES ROOMS(ROOM_ID));
INSERT INTO VILLAGES (NAME) VALUES ("Village1"), ("Village2");
INSERT INTO PERMISSIONS (DESCRIPTION) VALUES ("Role1"), ("Role2");
INSERT INTO PEOPLE (FIRST_NAME, LAST_NAME, BIRTHDAY, ROLE_ID, VID) VALUES ("Jennifer", "Smith", "1987-01-12", 1, 1), ("Sam", "Jackson", "1989-10-12", 2, 2);
INSERT INTO ROOMS(ROOM_NUM, BLDG_NAME, VID, VACANT) VALUES (24, "Building1" , 1, TRUE), (20, "Building2", 2, TRUE);
INSERT INTO RESIDENTS(PID, ROOM_ID, START_DATE, END_DATE, IN_RESIDENCE) VALUES (1, 1, "2020-01-15", "2020-02-20", TRUE), (2, 2, "2020-01-15", "2020-02-20", TRUE);